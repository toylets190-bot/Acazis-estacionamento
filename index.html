<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- SEO BÁSICO -->
    <title>Acazis Lavalava | Gestão de Estacionamento e Estética Automotiva</title>
    <meta name="description" content="Estacione seu veículo com segurança e consulte seu ticket online em tempo real. Acazis Lavalava: cuidado profissional e gestão digital.">
    <meta name="keywords" content="estacionamento, lava-jato, ticket online, rastreio veicular, acazis lavalava">

    <!-- FRAMEWORKS E FONTES -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4f46e5', // Indigo moderno
                        secondary: '#0f172a', // Navy elegante
                        accent: '#10b981', // Verde sucesso
                    },
                    fontFamily: {
                        sans: ['Plus Jakarta Sans', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <style>
        body { -webkit-tap-highlight-color: transparent; scroll-behavior: smooth; }
        
        /* Menu Fixo (Sticky) */
        .glass-nav {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        /* Animações de Feedback */
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Melhoria de Legibilidade */
        .text-balance { text-wrap: balance; }
        
        /* Botões Mobile Grandes (Acessibilidade) */
        .btn-mobile { min-height: 54px; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
        .btn-mobile:active { transform: scale(0.96); opacity: 0.9; }

        .screen { display: none; }
        .screen.active { display: block; }
    </style>
</head>
<body class="bg-slate-50 text-secondary antialiased">

    <!-- MENU SUPERIOR FIXO -->
    <header class="fixed top-0 left-0 right-0 z-[100] glass-nav border-b border-slate-200 px-6 py-4 flex justify-between items-center">
        <div class="flex items-center gap-2">
            <div class="bg-primary p-2 rounded-xl shadow-lg shadow-indigo-200">
                <i data-lucide="shield-check" class="text-white w-5 h-5"></i>
            </div>
            <h1 class="font-extrabold text-xl tracking-tight leading-none">Acazis<span class="text-primary">OS</span></h1>
        </div>
        <button onclick="toggleAdmin()" class="p-2.5 rounded-full bg-slate-100 text-slate-500 hover:text-primary transition-all border border-slate-200">
            <i data-lucide="lock" class="w-5 h-5"></i>
        </button>
    </header>

    <main class="max-w-md mx-auto pt-24 px-6 pb-32">

        <!-- [CLIENTE] TELA HOME -->
        <section id="scr-home" class="screen active fade-in space-y-8">
            <!-- PROPÓSITO CLARO NO TOPO -->
            <div class="space-y-4">
                <h2 class="text-3xl font-extrabold tracking-tight text-secondary leading-tight text-balance">
                    Estacione seu veículo e consulte seu ticket online.
                </h2>
                <p class="text-slate-500 text-lg leading-relaxed">
                    A <span class="font-bold text-primary">Acazis Lavalava</span> combina cuidado estético profissional com tecnologia de rastreio em tempo real.
                </p>
                <div class="flex flex-col gap-3">
                    <button onclick="switchScreen('track')" class="btn-mobile btn-primary bg-primary text-white rounded-2xl font-bold shadow-xl shadow-indigo-100 gap-2">
                        <i data-lucide="search" class="w-5 h-5"></i> Rastrear ticket agora
                    </button>
                    <button onclick="switchScreen('about')" class="btn-mobile bg-white border border-slate-200 text-secondary rounded-2xl font-bold gap-2">
                        <i data-lucide="info" class="w-5 h-5"></i> O que é Acazis Lavalava?
                    </button>
                </div>
            </div>

            <!-- SEÇÕES BEM ESPAÇADAS (WHITESPACE) -->
            <div class="pt-6 space-y-4">
                <h3 class="text-xs font-black uppercase tracking-widest text-slate-400">Serviços Disponíveis</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div onclick="switchScreen('prices')" class="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm space-y-3 cursor-pointer">
                        <div class="w-10 h-10 bg-indigo-50 text-primary rounded-xl flex items-center justify-center">
                            <i data-lucide="list-checks"></i>
                        </div>
                        <p class="font-bold text-sm">Tabela de Preços</p>
                    </div>
                    <div onclick="openWhatsApp()" class="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm space-y-3 cursor-pointer">
                        <div class="w-10 h-10 bg-emerald-50 text-accent rounded-xl flex items-center justify-center">
                            <i data-lucide="message-circle"></i>
                        </div>
                        <p class="font-bold text-sm">Contato WhatsApp</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- [CLIENTE] TELA RASTREIO -->
        <section id="scr-track" class="screen fade-in space-y-6">
            <button onclick="switchScreen('home')" class="flex items-center gap-2 text-slate-400 font-bold text-sm mb-4">
                <i data-lucide="arrow-left" class="w-4 h-4"></i> Voltar
            </button>
            <div class="bg-white p-8 rounded-[32px] shadow-sm border border-slate-100 space-y-6">
                <div class="text-center space-y-2">
                    <h2 class="text-2xl font-extrabold">Acompanhar Status</h2>
                    <p class="text-slate-400 text-sm">Insira o código do seu ticket (ex: ACZ-123)</p>
                </div>
                <input type="text" id="ipt-track" placeholder="Digite seu código" class="w-full p-5 bg-slate-50 border-2 border-slate-100 rounded-2xl text-center font-black text-2xl uppercase tracking-widest text-primary focus:border-primary outline-none transition-all">
                <button onclick="trackVehicle()" class="w-full btn-mobile bg-primary text-white rounded-2xl font-bold shadow-lg">Consultar Agora</button>
            </div>
            <div id="track-result" class="fade-in"></div>
        </section>

        <!-- [CLIENTE] TELA SOBRE -->
        <section id="scr-about" class="screen fade-in space-y-6">
            <button onclick="switchScreen('home')" class="flex items-center gap-2 text-slate-400 font-bold text-sm">
                <i data-lucide="arrow-left" class="w-4 h-4"></i> Voltar
            </button>
            <div class="bg-white p-8 rounded-[32px] shadow-sm border border-slate-100 space-y-6">
                <h2 class="text-2xl font-extrabold">Acazis Lavalava</h2>
                <div class="prose text-slate-600 space-y-4">
                    <p>Somos uma central de <span class="font-bold">gestão automotiva inteligente</span>. Nosso foco é oferecer transparência total para quem deixa seu carro conosco.</p>
                    <h4 class="text-secondary font-bold uppercase text-xs tracking-widest">O que é o Painel Master?</h4>
                    <p>É o nosso "cérebro" digital. Através dele, nossa equipe gerencia cada etapa da lavagem ou estadia, sincronizando os dados instantaneamente para que você consulte de qualquer lugar.</p>
                    <div class="pt-4 space-y-3">
                        <div class="flex items-center gap-3 text-sm">
                            <i data-lucide="clock" class="text-primary w-4 h-4"></i> Seg-Sex: 08h às 18h | Sáb: 08h às 14h
                        </div>
                        <div class="flex items-center gap-3 text-sm">
                            <i data-lucide="map-pin" class="text-primary w-4 h-4"></i> Rua dos Automóveis, 123 - Centro
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- [ADMIN] TELA LOGIN E PAINEL -->
        <section id="scr-admin" class="screen fade-in space-y-6">
            <div class="flex justify-between items-center">
                <h2 class="text-2xl font-extrabold">Painel Master</h2>
                <button onclick="logoutAdmin()" class="text-red-500 font-bold text-sm">Sair</button>
            </div>
            
            <div class="grid grid-cols-2 gap-3">
                <div class="bg-secondary p-5 rounded-3xl text-white">
                    <p class="text-[9px] font-bold uppercase opacity-50 tracking-widest">Caixa Hoje</p>
                    <h3 id="adm-cash" class="text-xl font-black">R$ 0,00</h3>
                </div>
                <div class="bg-white p-5 rounded-3xl border border-slate-100 shadow-sm">
                    <p class="text-[9px] font-bold uppercase text-slate-400 tracking-widest">No Pátio</p>
                    <h3 id="adm-count" class="text-xl font-black text-primary">0</h3>
                </div>
            </div>

            <!-- REGISTRAR ENTRADA -->
            <div class="bg-white p-6 rounded-[32px] shadow-sm border border-slate-100 space-y-4">
                <h4 class="text-xs font-black uppercase text-slate-400 tracking-widest">Registrar Entrada</h4>
                <div class="space-y-3">
                    <div class="relative">
                        <i data-lucide="hash" class="absolute left-4 top-4 text-slate-300 w-5 h-5"></i>
                        <input type="text" id="adm-plate" placeholder="Placa do Veículo" class="w-full pl-12 pr-4 py-4 bg-slate-50 border-none rounded-2xl font-bold uppercase tracking-widest" oninput="aiSimulation(this.value)">
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                        <input type="text" id="adm-model" placeholder="Modelo" class="w-full p-4 bg-slate-50 border-none rounded-2xl text-sm">
                        <input type="text" id="adm-color" placeholder="Cor" class="w-full p-4 bg-slate-50 border-none rounded-2xl text-sm">
                    </div>
                    <select id="adm-service" class="w-full p-4 bg-slate-50 border-none rounded-2xl text-sm font-bold">
                        <option value="Lavagem Simples">Lavagem Simples (R$ 35)</option>
                        <option value="Lavagem Completa">Lavagem Completa (R$ 60)</option>
                        <option value="Estacionamento Hora">Estacionamento (R$ 15)</option>
                    </select>
                </div>
                <button onclick="registerEntry()" class="w-full btn-mobile bg-secondary text-white rounded-2xl font-bold">Gerar Ticket</button>
            </div>

            <div id="adm-active-list" class="space-y-4"></div>
        </section>

    </main>

    <!-- NAVEGAÇÃO INFERIOR FIXA (MOBILE COMFORT) -->
    <nav class="fixed bottom-6 left-6 right-6 h-20 glass-nav rounded-[2.5rem] shadow-2xl z-[100] flex justify-around items-center px-4 border border-slate-200">
        <button onclick="switchScreen('home')" class="nav-item flex flex-col items-center gap-1 text-slate-300 transition-all">
            <i data-lucide="home" class="w-6 h-6"></i>
            <span class="text-[9px] font-bold uppercase tracking-tighter">Início</span>
        </button>
        <button onclick="switchScreen('track')" class="nav-item flex flex-col items-center gap-1 text-slate-300 transition-all">
            <i data-lucide="search" class="w-6 h-6"></i>
            <span class="text-[9px] font-bold uppercase tracking-tighter">Rastrear</span>
        </button>
        <button onclick="switchScreen('prices')" class="nav-item flex flex-col items-center gap-1 text-slate-300 transition-all">
            <i data-lucide="list-checks" class="w-6 h-6"></i>
            <span class="text-[9px] font-bold uppercase tracking-tighter">Preços</span>
        </button>
        <button onclick="switchScreen('about')" class="nav-item flex flex-col items-center gap-1 text-slate-300 transition-all">
            <i data-lucide="info" class="w-6 h-6"></i>
            <span class="text-[9px] font-bold uppercase tracking-tighter">Sobre</span>
        </button>
    </nav>

    <script>
        // --- MOTOR DO SISTEMA ---
        let state = JSON.parse(localStorage.getItem('acz_titanium_ux')) || {
            vehicles: [],
            history: [],
            isAdmin: false,
            services: [
                { name: 'Lavagem Simples', price: 35 },
                { name: 'Lavagem Completa', price: 60 },
                { name: 'Estacionamento Hora', price: 15 }
            ]
        };

        function init() {
            lucide.createIcons();
            renderAll();
        }

        function save() {
            localStorage.setItem('acz_titanium_ux', JSON.stringify(state));
            renderAll();
        }

        // --- NAVEGAÇÃO E FEEDBACK ---
        function switchScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('scr-' + id).classList.add('active');
            
            // Highlight Menu
            document.querySelectorAll('.nav-item').forEach(n => {
                n.classList.remove('active', 'text-primary');
                n.classList.add('text-slate-300');
            });
            const activeBtn = document.querySelector(`[onclick="switchScreen('${id}')"]`);
            if(activeBtn) activeBtn.classList.add('active', 'text-primary');
            
            window.scrollTo(0, 0);
            lucide.createIcons();
        }

        // --- AUTH ADMIN ---
        async function toggleAdmin() {
            if(state.isAdmin) return switchScreen('admin');
            const { value: pass } = await Swal.fire({
                title: 'Acesso Administrativo',
                text: 'Digite a senha do Painel Master',
                input: 'password',
                confirmButtonColor: '#4f46e5',
                confirmButtonText: 'Acessar'
            });
            if(pass === '1234321') {
                state.isAdmin = true;
                Swal.fire({ icon: 'success', title: 'Bem-vindo, Admin', timer: 1000, showConfirmButton: false });
                switchScreen('admin');
            } else if(pass) {
                Swal.fire('Erro', 'Senha incorreta', 'error');
            }
        }

        function logoutAdmin() {
            state.isAdmin = false;
            switchScreen('home');
        }

        // --- IA SIMULATION ---
        function aiSimulation(val) {
            if(val.length >= 7) {
                // Feedback visual de "pensando"
                const modelInput = document.getElementById('adm-model');
                modelInput.placeholder = "IA buscando informações...";
                
                setTimeout(() => {
                    const mocks = {
                        'ABC1234': { m: 'Honda Civic', c: 'Preto' },
                        'XYZ9999': { m: 'Toyota Corolla', c: 'Branco' },
                        'ACZ2024': { m: 'Tesla Model 3', c: 'Azul' }
                    };
                    const match = mocks[val.toUpperCase()];
                    if(match) {
                        document.getElementById('adm-model').value = match.m;
                        document.getElementById('adm-color').value = match.c;
                    }
                }, 800);
            }
        }

        // --- OPERAÇÕES ---
        function registerEntry() {
            const plate = document.getElementById('adm-plate').value.toUpperCase();
            const model = document.getElementById('adm-model').value;
            const color = document.getElementById('adm-color').value;
            const serviceName = document.getElementById('adm-service').value;
            const service = state.services.find(s => s.name === serviceName);

            if(!plate || !model) {
                return Swal.fire('Oops!', 'Preencha ao menos Placa e Modelo.', 'warning');
            }

            const ticket = "ACZ-" + Math.floor(100 + Math.random() * 899);
            const entry = {
                ticket, plate, model, color, service: service.name, price: service.price,
                entryTime: new Date().getTime(),
                status: 'Aguardando'
            };

            state.vehicles.unshift(entry);
            save();
            Swal.fire('Sucesso!', `Ticket ${ticket} gerado.`, 'success');
            
            document.getElementById('adm-plate').value = "";
            document.getElementById('adm-model').value = "";
            document.getElementById('adm-color').value = "";
        }

        function trackVehicle() {
            const query = document.getElementById('ipt-track').value.toUpperCase();
            const car = state.vehicles.find(v => v.ticket === query);
            const res = document.getElementById('track-result');

            if(!query) return;

            // Feedback visual imediato
            res.innerHTML = '<div class="text-center p-10"><div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-primary"></div></div>';

            setTimeout(() => {
                if(!car) {
                    res.innerHTML = `<div class="bg-red-50 text-red-500 p-6 rounded-2xl font-bold text-center border border-red-100">Código não localizado.</div>`;
                    return;
                }

                res.innerHTML = `
                    <div class="bg-white p-6 rounded-[32px] shadow-sm border-t-8 border-primary fade-in">
                        <div class="flex justify-between items-start mb-6">
                            <div>
                                <h4 class="text-2xl font-black text-secondary">${car.model}</h4>
                                <p class="text-primary font-bold uppercase text-xs tracking-widest">${car.plate}</p>
                            </div>
                            <span class="bg-indigo-50 text-primary px-4 py-1 rounded-full text-[10px] font-black uppercase">${car.status}</span>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between p-4 bg-slate-50 rounded-2xl">
                                <span class="text-xs font-bold text-slate-400">Serviço</span>
                                <span class="text-xs font-bold text-secondary">${car.service}</span>
                            </div>
                            <div class="flex justify-between p-4 bg-slate-50 rounded-2xl">
                                <span class="text-xs font-bold text-slate-400">Valor Estimado</span>
                                <span class="text-sm font-black text-primary">R$ ${car.price.toFixed(2)}</span>
                            </div>
                        </div>
                    </div>
                `;
            }, 600);
        }

        function updateStatus(ticket, s) {
            const car = state.vehicles.find(v => v.ticket === ticket);
            car.status = s;
            save();
        }

        function checkout(ticket) {
            const car = state.vehicles.find(v => v.ticket === ticket);
            Swal.fire({
                title: 'Finalizar Saída?',
                text: `Valor: R$ ${car.price.toFixed(2)}`,
                showCancelButton: true,
                confirmButtonText: 'Confirmar Pagamento',
                confirmButtonColor: '#10b981'
            }).then((res) => {
                if(res.isConfirmed) {
                    state.history.push({...car, exitTime: new Date().getTime()});
                    state.vehicles = state.vehicles.filter(v => v.ticket !== ticket);
                    save();
                }
            });
        }

        // --- RENDERS ---
        function renderAll() {
            renderAdminList();
            renderPrices();
            updateStats();
        }

        function renderAdminList() {
            const list = document.getElementById('adm-active-list');
            list.innerHTML = state.vehicles.map(v => `
                <div class="bg-white p-5 rounded-[28px] shadow-sm border border-slate-100 flex justify-between items-center">
                    <div>
                        <p class="text-[10px] font-black text-primary uppercase">${v.ticket}</p>
                        <h4 class="font-bold text-secondary">${v.plate}</h4>
                        <p class="text-[10px] text-slate-400 font-bold uppercase">${v.status}</p>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="updateStatus('${v.ticket}', 'Lavando')" class="p-2 bg-slate-50 rounded-xl text-slate-400 hover:text-primary"><i data-lucide="droplets" class="w-4 h-4"></i></button>
                        <button onclick="updateStatus('${v.ticket}', 'Pronto')" class="p-2 bg-slate-50 rounded-xl text-slate-400 hover:text-accent"><i data-lucide="check" class="w-4 h-4"></i></button>
                        <button onclick="checkout('${v.ticket}')" class="p-2 bg-secondary text-white rounded-xl shadow-lg"><i data-lucide="log-out" class="w-4 h-4"></i></button>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function renderPrices() {
            const container = document.getElementById('client-service-list');
            container.innerHTML = state.services.map(s => `
                <div class="bg-white p-6 rounded-[28px] shadow-sm flex justify-between items-center border border-slate-50">
                    <span class="font-bold text-secondary">${s.name}</span>
                    <span class="font-black text-primary">R$ ${s.price.toFixed(2)}</span>
                </div>
            `).join('');
        }

        function updateStats() {
            document.getElementById('adm-count').innerText = state.vehicles.length;
            const rev = state.history.reduce((acc, v) => acc + v.price, 0);
            document.getElementById('adm-cash').innerText = `R$ ${rev.toFixed(2)}`;
        }

        function openWhatsApp() {
            window.open('https://wa.me/5511999999999', '_blank');
        }

        window.onload = init;
    </script>
</body>
</html>
